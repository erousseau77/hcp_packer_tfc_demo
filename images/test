build {
  sources = ["source.googlecompute.vault"]

  hcp_packer_registry {
    bucket_name = "vault"
    description = <<EOT
This image built on top of Ubuntu Minimal 2110 contains Vault binary 
    EOT
    labels = {
      "target-use"  = "vault",
    }
  }

  provisioner "shell" {
    execute_command = "echo 'packer' | sudo -S sh -c '{{ .Vars }} {{ .Path }}'"
    script          = "./files/script.sh"
  }
}
-----------------------------------------------------------

build {
  hcp_packer_registry {
    bucket_name = "learn-packer-ubuntu"
    description = <<EOT
Some nice description about the image being published to HCP Packer Registry.
    EOT
    labels = {
      "foo-version" = "3.4.0",
      "foo"         = "bar",
    }
  }
  sources = [
    "source.amazon-ebs.basic-example-east",
    "source.amazon-ebs.basic-example-west"
  ]
}